
@{
    ViewBag.Title = "Index";
}


       <div class="content" ng-controller="menuCtrl">
            <div class="container">
                <div class="row">
                    <div class="col-sm-12">

                        <div class="col-sm-12">
                            <div class="col-sm-12" style="padding-top:15px;">
                                <h4 class="m-t-0 m-b-30 header-title">គ្រប់គ្រងមីនុយ</h4>
                            </div>
                            <div class="col-sm-6 form-inline" style="padding-bottom:10px;">
                                <label class="control-label">បង្ហាញ</label>
                                <select class="form-control">
                                    <option value="value">5</option>
                                    <option value="value">10</option>
                                </select>
                            </div>
                            <div class="col-sm-2"><input type="button" value="បង្កើតថ្មី" class="btn btn-success btn-sm pull-right" data-toggle="modal" data-target="#save_menu"></div>
                            <div class="col-sm-4">

                                <div class="form-inline pull-right">
                                    <label class="control-label">ស្វែងរក</label>
                                    ​<input type="text" class="form-control" name="txtSearchUser" placeholder="ស្វែងរក" />
                                </div>
                            </div>
                        </div>
                        <div class="card-box">
                            <table id="datatable" class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th>មីនុយ</th>
                                        <th>ទំព័រ</th>
                                        <th>មីនុយមេ</th>
                                        <th>អ្នកបង្កើត</th>
                                        <th>សកម្មភាព</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="menu in menulist">
                                        <td>{{menu.title}}</td>
                                        <td>{{menu.page}}</td>
                                        <td>{{menu.parent_name}}</td>
                                        <td>{{menu.user}}</td>
                                        <td>
                                            ​​<input type="button" ng-click="delete(menu)" value="លុប" class="btn btn-danger btn-sm">
                                            <input type="button" ng-click="edit(menu)" value="កែប្រែ" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#menu_edit">
                                        </td>
                                    </tr>


                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


            </div> <!-- container -->
            <!--model user edit-->
            <div id="menu_edit" class="modal fade" role="dialog" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog" style="width:​500px">

                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" id="btnClose" class="close" data-dismiss="modal" ng-click="pop()">&times;</button>
                            <h4 class="modal-title">កែប្រែអ្នកប្រើប្រាស់</h4>
                        </div>
                        <div class="modal-body">

                            <form class="form-horizontal">
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label class="control-label">ឈ្មោះមីនុយ</label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" ng-model="selectedMenu.title" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label class="control-label">ទំព័រ</label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select class="form-control" ng-options="p.title for p in pages" ng-model="selectedPage"></select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label class="control-label">មីនុយមេ</label>
                                    </div>
                                    <div class="col-sm-6">

                                        <select class="form-control" ng-options="menu.title for menu in menulist | filter:filterMainMenu" ng-model="mainMenu"></select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label class="control-label">ឈ្មោះអ្នកបង្កើត</label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control" ng-model="selectedMenu.user" required />
                                    </div>
                                </div>
                                @*<script type="text/ng-template" id="menuTree">
                                        {{ menu.title }}
                                        <ul ng-if="menu.submenu" class="list-group">
                                            <li class="list-group-item" ng-repeat="menu in menu.submenu" ng-include="'menuTree'">
                                            </li>
                                        </ul>

                                    </script>*@
                                    <ul class="list-group">
                                        <li class="list-group-item" ng-repeat="menu in menuTree | filter:menuFilter" ng-include="'menuTree'"></li>
                                    </ul>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" ng-click="update()" class="btn btn-primary">រក្សារទុក</button>
                        </div>
                    </div>

                </div>
            </div>
            @Html.Partial("AddNew")
        </div>
